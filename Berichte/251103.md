# Host discovery und Port probing und scanning

---
**Name:** Lukas Haselberger <br>
**Klasse:** 4AHITS <br>
**Datum:** 03.11.2025 <br>
**Fach:** ITSE - Labor <br>


## Host discovery

### Aufgabenstellung

nmap ist ein Tool zum network scanning. In einer ersten Phase (host discovery, ping scan oder ping sweep) ermittelt nmap alle aktiven Hosts.

**Aufgaben:**

Recherchiere zur grundlegenden Anwendung von nmap f√ºr einen sogenannten ping scan (host discovery).
Ermittle alle aktiven Hosts im Subnetz des Labor-Netzwerks mit nmap.


**Hinweise:**

nmap ben√∂tigt als Argument den IP Adressbereich des Subnet in Pr√§fix Notation (z.B.: 192.168.178.0/24)
Mit der Option -sn f√ºhrt nmap nur den ping scan durch (ansonsten wird automtisch auch die n√§chste, l√§nger dauernde, Phase des scans ausgef√ºhrt)

**Recherchiere zur grundlegenden Anwendung von nmap f√ºr einen sogenannten ping scan (host discovery).**

* nmap findet heraus, welche Hosts in einem Netz sind, ohne die Ports zu scannen

- sn ‚Üí Nur Host-Discovery (kein Portscan)

- PE ‚Üí ICMP Echo (klassischer Ping)

- PR ‚Üí ARP-Ping (lokales Netz)

- PS80 ‚Üí TCP-SYN-Ping an Port 80

- Pn ‚Üí Host-Discovery √ºberspringen (alle als ‚Äûup‚Äú behandeln)


**Ermittle alle aktiven Hosts im Subnetz des Labor-Netzwerks mit nmap.**


```
$ sudo nmap -sn 192.168.2.0/24
```

![nmap](../bilder/nmap.png)


## port probing

#### IP MS: 192.168.2.51


### Aufgabenstellung

Verwende telnet um festzustellen ob ein ssh Server auf Metasploitable l√§uft

```
$ telnet 192.168.2.51 22
``` 

![telnet auf ms](../bilder/telnet.png)

**Aufgabe**

Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus.

**Auf 3 Arten:**

#### Verwende telnet

```
$ telnet 192.168.2.51 80
``` 

![telnet-http](../bilder/http-telnet.png)


#### Verwende nc (netcat)

```
$ nc 192.168.2.51  80 << EOF
GET / HTTP/1.1
Host: 192.168.2.51

EOF
```


Hinweis: der notwendige http request header kann am besten mit Hilfe eines Shell here-documents beschrieben werden.


#### Verwende curl

```
curl -I http://192.168.2.51
```


### Port Probing Cheat Sheet

---

### 1Ô∏è‚É£ Telnet
```telnet <IP> <PORT>```
- Pr√ºft, ob ein TCP-Port erreichbar ist.
- Erweiterungen / Tipps:
  1. HTTP pr√ºfen: GET / HTTP/1.1 + Host: <IP>
  2. SSH pr√ºfen: Port 22 testen
  3. Manuell Banner anzeigen: Telnet zeigt offene Dienste direkt

---

### 2Ô∏è‚É£ Netcat (nc)
```nc <IP> <PORT>```
- Pr√ºft die Erreichbarkeit eines Ports.
- Erweiterungen / Optionen:
  1. -z ‚Üí Scan ohne Daten senden (nur pr√ºfen, ob Port offen)
  2. -v ‚Üí verbose Ausgabe f√ºr mehr Details
  3. -u ‚Üí UDP statt TCP testen
```
Beispiel HTTP mit Here-Document:
nc <IP> 80 << EOF
GET / HTTP/1.1
Host: <IP>

EOF
```
---

### 3Ô∏è‚É£ Curl
```curl -I http://<IP>```
- Ruft nur HTTP-Header ab und zeigt Servername/Version.
- Erweiterungen / Optionen:
  1. -I ‚Üí nur Header abrufen
  2. -v ‚Üí verbose Ausgabe, zeigt Verbindungsdetails
  3. -L ‚Üí Redirects automatisch folgen

Beispiel Port pr√ºfen:
```curl http://<IP>:<PORT>```


## netcat port scaning

```
$ nc -zv 192.168.2.51 1-30
```

![Portbelegung](../bilder/Portbelegung.png)

**Auf den Ports 1-30 befinden sich volgende Dienste:**

| Port | Dienst (Standard) | Beschreibung                         |
| ---- | ----------------- | ------------------------------------ |
| 22   | SSH               | sicher, verschl√ºsselt                |
| 23   | Telnet            | unverschl√ºsselt, Remote-Zugriff      |
| 25   | SMTP              | E-Mail-Versand, Server-Kommunikation |
| 21   | FTP               | Datei√ºbertragung, Login              |
| 20   | FTP (Data)        | Daten√ºbertragung, Port               |
| 19   | Chargen (Test)    | Test, Echo, Debug                    |



### nmap port scaning

```$ nmap -p- 192.168.2.51```

Host is up (0.0015s latency).
Not shown: 65505 closed tcp ports (reset)

PORT      STATE SERVICE
21/tcp    open  ftp<br>
22/tcp    open  ssh<br>
23/tcp    open  telnet<br>
25/tcp    open  smtp<br>
53/tcp    open  domain<br>
80/tcp    open  http<br>
111/tcp   open  rpcbind<br>
139/tcp   open  netbios-ssn<br>
445/tcp   open  microsoft-ds<br>
512/tcp   open  exec<br>
513/tcp   open  login<br>
514/tcp   open  shell<br>
1099/tcp  open  rmiregistry<br>
1524/tcp  open  ingreslock<br>
2049/tcp  open  nfs<br>
2121/tcp  open  ccproxy-ftp<br>
3306/tcp  open  mysql<br>
3632/tcp  open  distccd<br>
5432/tcp  open  postgresql<br>
5900/tcp  open  vnc<br>
6000/tcp  open  X11<br>
6667/tcp  open  irc<br>
6697/tcp  open  ircs-u<br>
8009/tcp  open  ajp13<br>
8180/tcp  open  unknown<br>
8787/tcp  open  msgsrvr<br>
37950/tcp open  unknown<br>
44551/tcp open  unknown<br>
57903/tcp open  unknown<br>
60857/tcp open  unknown<br>

MAC Address: 00:0C:29:7E:F9:4D (VMware)

Nmap done: 1 IP address (1 host up) scanned in 5.42 seconds

#### Optionen

# Nmap Optionen ‚Äì Zweck & Option

- Alle Ports scannen: -p-
- Nur N h√§ufigste Ports: --top-ports N
- Ping/Host-Discovery √ºberspringen: -Pn
- Service/Version Detection: -sV
- Betriebssystem erkennen: -O
- Aggressiver Scan: -A
- Timing/Geschwindigkeit: -T0 bis -T5
- Ausgabe in Dateien: -oN / -oX / -oA
- Grund f√ºr Portstatus anzeigen: --reason



### Port scan auf anderen Rechner 

```
$ nmap  192.168.1.51
```

Nmap scan report for 192.168.1.51
Host is up (0.0021s latency).
All 1000 scanned ports on 192.168.1.51 are in ignored states.
Not shown: 1000 closed tcp ports (reset)

Nmap done: 1 IP address (1 host up) scanned in 841.60 seconds

### Port scan auf Windows



### cheat sheet

<h1>üõ†Ô∏è Nmap Cheat Sheet (Wichtig & Verwendet)</h1>

<h2>üîπ 1) Grundlegende Scans</h2>
nmap &lt;IP&gt;                     # Standard-Scan (Top 1000 Ports)<br>
nmap -p- &lt;IP&gt;                 # Alle 65.535 Ports scannen<br>
nmap --top-ports &lt;N&gt; &lt;IP&gt;     # Nur die N h√§ufigsten Ports<br>

<h2>üîπ 2) Host-Discovery</h2>
nmap -sn &lt;IP&gt;                 # Host-Online-Check (Ping)<br>
nmap -Pn &lt;IP&gt;                 # Ping √ºberspringen (wenn ICMP blockiert)<br>
nmap -n &lt;IP&gt;                  # Keine DNS-Aufl√∂sung (schneller)<br>

<h2>üîπ 3) Service- & Versionsinfo</h2>
nmap -sV &lt;IP&gt;                 # Service- und Versionserkennung<br>
nmap -sC &lt;IP&gt;                 # Standard NSE-Skripte<br>

<h2>üîπ 4) Tiefgehende Analyse</h2>
nmap -O &lt;IP&gt;                  # Betriebssystem erkennen<br>
nmap -A &lt;IP&gt;                  # Aggressiver Scan (OS + Version + Scripts + Traceroute)<br>
nmap --reason &lt;IP&gt;            # Warum Ports als open/closed gelten<br>

<h2>üîπ 5) Geschwindigkeit / Timing</h2>
nmap -T4 &lt;IP&gt;                 # Schnell & zuverl√§ssig (Empfohlen)<br>
nmap -T5 &lt;IP&gt;                 # Sehr schnell (wenn Genauigkeit egal ist)<br>

<h2>üîπ 6) Ausgabe / Reports</h2>
nmap -oN scan.txt &lt;IP&gt;        # Normale Textdatei<br>
nmap -oX scan.xml &lt;IP&gt;        # XML-Datei<br>
nmap -oA report &lt;IP&gt;          # Alle Formate (N, XML, GNMAP)<br>

<hr>

<h2>Empfohlene Kombi-Scans f√ºr Metasploitable</h2>
nmap -sV -sC -T4 &lt;IP&gt;         # Schneller √úberblick<br>
nmap -p- -T4 &lt;IP&gt;             # Vollst√§ndiger Portscan<br>
nmap -A -p- -T4 &lt;IP&gt;          # Maximaler Infogewinn<br>
nmap -Pn -sV &lt;IP&gt;             # Wenn Ping blockiert ist<br>








